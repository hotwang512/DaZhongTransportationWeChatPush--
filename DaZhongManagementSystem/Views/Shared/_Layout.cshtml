<!DOCTYPE html>

<html>
<head>
    <title>大众企业号后台管理系统</title>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=EmulateIE9">
    <meta name="robots" content="all" />


    <script src="@Url.Content("~/_theme/js/jquery-2.0.3.min.js")"></script>

        <link rel="stylesheet" href="@Url.Content("~/_theme/css/bootstrap.min.css")" />
    <link rel="stylesheet" href="@Url.Content("~/_theme/jqwidgets-ver3.8.1/jqwidgets/styles/jqx.base.css")" />
    <link rel="stylesheet" href="@Url.Content("~/_theme/jqwidgets-ver3.8.1/jqwidgetsExtensions/jqxext.css")" />
    <link href="@Url.Content("~/_theme/jqwidgets-ver3.8.1/jqx.office.css")" rel="stylesheet" />
    <link href="@Url.Content("~/_theme/Validate/validate.css")" rel="stylesheet" />
    <link rel="stylesheet" href="@Url.Content("~/_theme/_css/common.css")" />
    <link href="@Url.Content("~/_theme/jqwidgets-ver3.8.1/jqx.office.css")" rel="stylesheet" />

    <link href="@Url.Content("~/_theme/systemIcon/demo.css") rel="stylesheet" />
    <link href="@Url.Content("~/_theme/systemIcon/iconfont.css")" rel="stylesheet" />
    

    <!--[if lt IE 9]>
          <script type="text/javascript" src="@Url.Content("~/_theme/js/html5shiv.js")"></script>
        <script type="text/javascript" src="@Url.Content("~/_theme/js/respond.min.js")"></script>
    <![endif]-->
    <script src="@Url.Content("~/_theme/Validate/validate.js")"></script>
    <script src="@Url.Content("~/_theme/_js/menueCookie.js")"></script>
    <script src="@Url.Content("~/_theme/_js/common.js")"></script>




    <style type="text/css">
        .main_header {
            width: 100%;
            /*background-color: #375471;*/
            position: fixed;
            top: 0px;
            z-index: 999;
            background-image: url('../../_theme/images/top.png');
        }

        .main_body {
            margin-top: 60px;
            width: 100%;
            height: auto;
        }

        .left_content {
            width: 210px;
            background-color: white;
            float: left;
        }

        .main_content {
            width: 100%;
        }

        .title_content {
            width: 100%;
            height: 45px;
            background-color: white; /*#F5F5F5;*/
            border: 1px;
            border-color: #ddd;
            border-style: solid;
            /*-moz-box-shadow: 0px 1px 17px #dddddd;*/
            /*-webkit-box-shadow: 0 6px 12px rgba(0,0,0,0.175);*/
            /*box-shadow: 0 6px 12px rgba(0,0,0,0.175);*/
        }

        .title_icon {
            width: 36px;
            height: 36px;
            margin: 5px 0 0 10px;
            background-image: url('/_theme/images/icons.png');
            background-position: -11px -145px;
        }

        .title_text {
            line-height: 44px;
            font-weight: bold;
            font-size: 16px;
            padding-left: 8px;
        }

        .page_content {
            width: 100%;
            padding-left: 15px;
            padding-right: 15px;
        }
    </style>
    @RenderSection("css", false)

    <script type="text/javascript">

        $(function () {
            setMenueHeight();

        });

        function setMenueHeight() {
            var currentHeight = $(window).height();
            $(".left_content").css("min-height", currentHeight - 60);
        }
        $(window).resize(function () {
            //alert($(".left_content").css("height"));
            //$(".left_content").css("min-height", $(".left_content").css("height"));
            setMenueHeight();
        });


    </script>

</head>
<body style="background-color: #f5f5f5; /*background-image: url('/_theme/images/bg.gif')*/">

    <!--Header-->
    <div class="main_header">

        @Html.Partial("~/Views/Shared/_LayoutTop.cshtml")
    </div>
    <!--/Header-->


    <div class="main_body">
        <table style="border: 0px; width: 100%;">
            <tr>

                <td valign="top" >
                    <div class="left_content">@Html.Partial("~/Views/Shared/_LayoutLeft.cshtml")</div>
                </td>
                <td class="main_content" valign="top">

                    <div class="title_content">
                        <table>
                            <tr>

                                <td>
                                    <div class="title_icon"></div>
                                </td>
                                <td class="title_text">@RenderSection("pageTitle", required: false)</td>
                            </tr>
                        </table>
                    </div>
                    <div class="page_content">@RenderBody()</div>
                    <div style="text-align: center; padding: 20px 20px 0 20px; clear: both;">
                        <hr style="border: 1px solid #D4D4D4" />
                        <span>沪ICP备16054935号-1 </span>
                    </div>
                </td>
            </tr>
        </table>
    </div>

    <!-- 模态弹出 -->
    <div class="container">
        <div class="modal fade bs-example-modal-sm" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" id="changePwdDialog">
            <div class="modal-dialog modal-sm" style="width: 100%; padding-right: 20px; margin-top: 100px;">
                <div class="modal-content" style="width: 445px; margin-left: auto; margin-right: auto;">
                    <div class="modal-header" style="width: 100%; margin-left: auto; margin-right: auto;">
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                        <h4 class="modal-title" id="myModalLabel_title" style="color: #555; font-family: Calibri;">修改密码</h4>
                    </div>
                    <div class="modal-body" style="width: 100%;">
                        <table style="width: 100%;">
                            <tr style="height: 45px;">
                                <td align="left" style="width: 75px;"><span class="spanText">旧密码</span></td>
                                <td style="width: 150px;">
                                    <input id="txtOldPwd" name="" type="password" class="input_text form-control" validatetype="required" />
                                </td>
                            </tr>
                            <tr style="height: 45px;">
                                <td align="left" style="width: 75px;"><span class="spanText">新密码</span></td>
                                <td style="width: 150px;">
                                    <input id="txtNewPwd" name="" type="password" class="input_text form-control" validatetype="required" />
                                </td>
                            </tr>
                            <tr style="height: 45px;">
                                <td align="left" style="width: 75px;"><span class="spanText">确认密码</span></td>
                                <td style="width: 150px;">
                                    <input id="txtNewPwdAgain" name="" type="password" class="input_text form-control" validatetype="required" />
                                </td>
                            </tr>
                        </table>
                    </div>
                    <div class="modal-footer">
                        <button id="btnSave_PWD" type="button" class="buttons" style="width: 90px; margin-left: 18px; margin-top: 0px"><i class="iconfont btn_icon">&#xe614;</i><span style="margin-left: 6px; float: left; font-family: Calibri; font-size: 19px">保存</span></button>
                        <button id="btnCancel_PWD" type="button" class="buttons" style="width: 90px; margin-left: 18px; margin-top: 0px"><i class="iconfont btn_icon">&#xe611;</i><span style="margin-left: 10px; float: left; font-family: Calibri; font-size: 19px">取消</span></button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    @*<script type="text/javascript" src="@Url.Content("~/_theme/jqwidgets-ver3.8.1/scripts/jquery-1.11.1.min.js")"></script>*@
    <script type="text/javascript" src="@Url.Content("~/_theme/js/jquery.cookie.js")"></script>
    <script type="text/javascript" src="@Url.Content("~/_theme/js/bootstrap.min.js")"></script>
    <script type="text/javascript" src="@Url.Content("~/_theme/js/typeahead-bs2.min.js")"></script>
    <!--[if lt IE 8]>
          <script type="text/javascript" src="@Url.Content("~/_theme/js/excanvas.min.js")"></script>
    <![endif]-->
    <script type="text/javascript" src="@Url.Content("~/_theme/js/jquery-ui-1.10.3.custom.min.js")"></script>
    <script type="text/javascript" src="@Url.Content("~/_theme/js/jquery.ui.touch-punch.min.js")"></script>
    <script type="text/javascript" src="@Url.Content("~/_theme/js/jquery.slimscroll.min.js")"></script>
    <script type="text/javascript" src="@Url.Content("~/_theme/js/jquery.easy-pie-chart.min.js")"></script>
    <script type="text/javascript" src="@Url.Content("~/_theme/js/jquery.sparkline.min.js")"></script>
    <script type="text/javascript" src="@Url.Content("~/_theme/js/flot/jquery.flot.min.js")"></script>
    <script type="text/javascript" src="@Url.Content("~/_theme/js/flot/jquery.flot.pie.min.js")"></script>
@*    <script type="text/javascript" src="@Url.Content("~/_theme/js/flot/jquery.flot.resize.min.js")"></script>*@
    <!-- ace scripts -->
    <script type="text/javascript" src="@Url.Content("~/_theme/jqwidgets-ver3.8.1/jqwidgets/jqx-all.js")"></script>
    <script type="text/javascript" src="@Url.Content("~/_theme/jqwidgets-ver3.8.1/jqwidgetsExtensions/jqxext.js")"></script>
    <script type="text/javascript" src="@Url.Content("~/_theme/jqwidgets-ver3.8.1/jqwidgets/globalization/globalize.js")"></script>
    <script type="text/javascript" src="@Url.Content("~/_theme/jqwidgets-ver3.8.1/jqwidgets/globalization/globalize.culture.zh.js")"></script>
    <script type="text/javascript" src="@Url.Content("~/_theme/jqwidgets-ver3.8.1/scripts/demos.js")"></script>
    <script type="text/javascript" src="@Url.Content("~/_theme/tool/ejq.js")"></script>
    <script type="text/javascript" src="@Url.Content("~/_theme/tool/jquery-form.min.js")"></script>
    <script type="text/javascript" src="@Url.Content("~/_theme/_js/tool.js")"></script>
    @*  <script type="text/javascript" src="@Url.Content("~/Views/_js/layout.js")"></script>*@
    <script type="text/javascript">
        $(function () {
            //点击修改密码链接
            $("#aChangePwd").on('click', function () {
                $("#txtOldPwd").val('');
                $("#txtNewPwd").val('');
                $("#txtNewPwdAgain").val('');
                $("#changePwdDialog").modal({ backdrop: 'static', keyboard: false });
                $("#changePwdDialog").modal('show');
            });
            //点击退出链接
            $("#aLogout").on('click', function () {
                $.ajax({
                    url: "/LogOut/ProcessLogOut",
                    type: "post",
                    success: function (msg) {
                        if (msg === "ok") {
                            window.location.href = "/Login/Index";
                        }
                    }
                });


            });
            //取消按钮事件
            $("#btnCancel_PWD").on('click', function () {
                $("#changePwdDialog").modal('hide');
            });

            //保存按钮事件
            $("#btnSave_PWD").click(function () {
                var validateError = 0;
                if (!Validate($("#txtOldPwd"))) {
                    validateError++;
                }
                if (!Validate($("#txtNewPwd"))) {
                    validateError++;
                }
                if (!Validate($("#txtNewPwdAgain"))) {
                    validateError++;
                }
                if (validateError == 0) {
                    if ($("#txtNewPwd").val() != $("#txtNewPwdAgain").val()) {
                        jqxNotification("两次输入的密码不一致！", null, "error");
                    } else {
                        $.post("/UserManage/ChangePassWord",
                            { vguid: "@DaZhongManagementSystem.Common.CurrentUser.GetCurrentUser().Vguid", newPwd: $("#txtNewPwd").val(), oldPwd: $("#txtOldPwd").val() }, function (data) {
                                if (data.sMsg != "") {
                                    jqxNotification(data.sMsg, null, "error");
                                } else {
                                    if (data.bRet == "ok") {
                                        $("#changePwdDialog").modal('hide');
                                        jqxNotification("保存成功！", null, "success");
                                    } else {
                                        jqxNotification(data.bRet, null, "error");
                                    }
                                }
                            });
                        }
                    }
            });
        });
    </script>

    @RenderSection("js", required: false)

    <div class="container">
        <div class="modal fade bs-example-modal-sm" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" id="confirmWindowDialog">
            <div class="modal-dialog modal-sm" style="width: 100%; padding-right: 20px; margin-top: 100px;">
                <div class="modal-content" style="width: 300px; margin-left: auto; margin-right: auto;">
                    <div class="modal-header" style="width: 100%; margin-left: auto; margin-right: auto; font-size: 15px; background-color: #375471; color: white; padding: 8px;">
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                        <h4 class="modal-title" id="confirmWindow_title">确认框</h4>
                    </div>
                    <div class="modal-body" style="width: 100%; padding: 7px;">

                        <table style="width: 100%;">
                            <tr style="height: 45px;">
                                <td align="right" style="width: 50px;">
                                    <img src="@Url.Content("~/_theme/images/question.png")" /></td>
                                <td id="confirmWindow_msg" style="font-size: 17px; text-align: left; padding-left: 10px;">确认框</td>

                            </tr>

                        </table>

                    </div>
                    <div class="modal-footer" style="padding: 10px 20px 10px;">
                        <button id="confirmWindow_OKBtn" class="btn btn-warning" type="button" style="width: 50px; font-size: 12px;">
                            确定
                        </button>
                        <button id="confirmWindow_CancelBtn" class="btn btn-danger" style="margin-left: 5px; width: 50px; font-size: 12px;" type="button">
                            取消
                        </button>
                    </div>

                </div>
            </div>
        </div>
    </div>


    <div class="container">
        <div class="modal fade bs-example-modal-sm" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" id="loadingDialog">
            <div class="modal-dialog modal-sm" style="width: 100%; padding-right: 20px; margin-top: 100px;">
                <div class="modal-content" style="width: 200px; margin-left: auto; margin-right: auto;">

                    <div class="modal-body" style="width: 100%; padding: 7px;">

                        <table style="width: 100%;">
                            <tr style="height: 40px;">
                                <td align="right" style="width: 50px;">
                                    <img src="@Url.Content("~/Views/_img/Waiting.gif")" width="45" /></td>
                                <td style="font-size: 17px; text-align: left; padding-left: 10px;">处理中....</td>

                            </tr>

                        </table>

                    </div>


                </div>
            </div>
        </div>
    </div>


</body>

</html>
